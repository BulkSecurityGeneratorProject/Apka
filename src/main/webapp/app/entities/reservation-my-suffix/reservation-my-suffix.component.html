<div>
    <h2>
        <span jhiTranslate="jhipsterApp.reservation.home.title">Reservations</span>
        <button class="btn btn-primary float-right jh-create-entity create-reservation-my-suffix" [routerLink]="['/', { outlets: { popup: ['reservation-my-suffix-new'] } }]">
            <span class="fa fa-plus"></span>
            <span  jhiTranslate="jhipsterApp.reservation.home.createLabel">
            Create new Reservation
            </span>
        </button>
    </h2>
    <jhi-alert></jhi-alert>
    <div class="row">
    </div>
    <br/>
    <div class="table-responsive" *ngIf="reservations">
        <table class="table table-striped">
            <thead>
            <tr>
            <th class="centerText"><span jhiTranslate="global.field.id">ID</span></th>
            <th class="centerText"><span jhiTranslate="jhipsterApp.reservation.startDate">Start Date</span></th>
            <th class="centerText"><span jhiTranslate="jhipsterApp.reservation.finishDate">Finish Date</span></th>
                <th>DNI POMIEDZY</th>
            <th class="centerText"><span jhiTranslate="jhipsterApp.reservation.client">Client</span></th>
            <th class="centerText"><span jhiTranslate="jhipsterApp.reservation.room">Room</span></th>
            <th></th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let reservation of reservations ;trackBy: trackId">
                <td class="centerText"><a [routerLink]="['../reservation-my-suffix', reservation.id ]">{{reservation.id}}</a></td>
                <td class="centerText">{{reservation.startDate | date:'longDate'}}</td>
                <td class="centerText">{{reservation.finishDate | date:'longDate'}}</td>
                <td>&lt;!&ndash;<span>{{ getDaysBetween(reservation.startDate,reservation.finishDate) | date:'d'}}</span>&ndash;&gt;
                    liczby: {{ getDaysBetween(reservation.startDate,reservation.finishDate) | date:'longDate'}}
                    <span *ngFor="let daysBet of getDaysBetween(reservation.startDate,reservation.finishDate);">
                        {{ daysBet | date:'longDate' }}
                        <span *ngIf="reservation.roomId == chosenRoom && awsomeFunction()"> {{ addRooomToOccupiedTable(daysBet) }} </span>
                    </span>
                </td>
                <span *ngIf="reservation.roomId == chosenRoom" [hidden] ="true">{{ setWasCalled() }}</span>
                <td class="centerText">
                    <div *ngIf="reservation.clientId">
                        <a *ngIf="clients" [routerLink]="['../client-my-suffix', reservation.clientId  ]" >{{convertFromID(clients, reservation.clientId )}}</a>
                    </div>
                </td>
                <td class="centerText">
                    <div *ngIf="reservation.roomId">
                        <a *ngIf="rooms" [routerLink]="['../room-my-suffix', reservation.roomId  ]" >{{convertFromID(rooms, reservation.roomId )}}</a>
                    </div>
                </td>
                <td class="text-right">
                    <div class="btn-group flex-btn-group-container">
                        <button type="submit"
                                [routerLink]="['../reservation-my-suffix', reservation.id ]"
                                class="btn btn-info btn-sm">
                            <span class="fa fa-eye"></span>
                            <span class="d-none d-md-inline" jhiTranslate="entity.action.view">View</span>
                        </button>
                        <button type="submit"
                                [routerLink]="['/', { outlets: { popup: 'reservation-my-suffix/'+ reservation.id + '/edit'} }]"
                                replaceUrl="true"
                                queryParamsHandling="merge"
                                class="btn btn-primary btn-sm">
                            <span class="fa fa-pencil"></span>
                            <span class="d-none d-md-inline" jhiTranslate="entity.action.edit">Edit</span>
                        </button>
                        <button type="submit"
                                [routerLink]="['/', { outlets: { popup: 'reservation-my-suffix/'+ reservation.id + '/delete'} }]"
                                replaceUrl="true"
                                queryParamsHandling="merge"
                                class="btn btn-danger btn-sm">
                            <span class="fa fa-remove"></span>
                            <span class="d-none d-md-inline" jhiTranslate="entity.action.delete">Delete</span>
                        </button>
                    </div>
                </td>
            </tr>

            </tbody>
        </table>
        <p>POKOJE {{ roomsLength }}</p>
        <p (click)="test()"> KLIKNIJ {{ tablicaZajebistosci[1][1] }} </p>
        TEST_ROOM: {{ howManyTest }}
        RES_TEST: {{ howManyRes }}
        <br/>
        <span *ngFor="let roomOccupied of tablicaZajebistosci[0]">{{ roomOccupied  | date:'longDate'}} ,</span>
    </div>
</div><br><br>

<ng-template #modalContent let-close="close">
    <div class="modal-header">
        <h5 class="modal-title">Event action occurred</h5>
        <button type="button" class="close" (click)="close()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div>
            Action:
            <pre>{{ modalData?.action }}</pre>
        </div>
        <div>
            Event:
            <pre>{{ modalData?.event | json }}</pre>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" (click)="close()">OK</button>
    </div>
</ng-template>

<div class="row text-center">
    <div class="col-md-4">
        <div class="btn-group">
            <div
                class="btn btn-primary"
                mwlCalendarPreviousView
                [view]="view"
                [(viewDate)]="viewDate"
                (viewDateChange)="activeDayIsOpen = false">
                Previous
            </div>
            <div
                class="btn btn-outline-secondary"
                mwlCalendarToday
                [(viewDate)]="viewDate">
                Today
            </div>
            <div
                class="btn btn-primary"
                mwlCalendarNextView
                [view]="view"
                [(viewDate)]="viewDate"
                (viewDateChange)="activeDayIsOpen = false">
                Next
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <h3>{{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}</h3>
    </div>
</div>
<br>
<div [ngSwitch]="view">
    <mwl-calendar-month-view
        *ngSwitchCase="'month'"
        [viewDate]="viewDate"
        [events]="events"
        [refresh]="refresh"
        [activeDayIsOpen]="activeDayIsOpen"
        (dayClicked)="dayClicked($event.day)"
        (eventClicked)="handleEvent('Clicked', $event.event)"
        (eventTimesChanged)="eventTimesChanged($event)">
    </mwl-calendar-month-view>
    <mwl-calendar-week-view
        *ngSwitchCase="'week'"
        [viewDate]="viewDate"
        [events]="events"
        [refresh]="refresh"
        (eventClicked)="handleEvent('Clicked', $event.event)"
        (eventTimesChanged)="eventTimesChanged($event)">
    </mwl-calendar-week-view>
    <mwl-calendar-day-view
        *ngSwitchCase="'day'"
        [viewDate]="viewDate"
        [events]="events"
        [refresh]="refresh"
        (eventClicked)="handleEvent('Clicked', $event.event)"
        (eventTimesChanged)="eventTimesChanged($event)">
    </mwl-calendar-day-view>
</div>
